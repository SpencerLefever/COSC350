Algorithm for semaphore producer consumer problems